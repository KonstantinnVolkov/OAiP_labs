program Project3;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

const
  FMth = [1,3,5,7,8,10,12];
  SMth = [4,6,9,11];

type
  years = 0..2013;
  months = 1..12;
  days = 1..31;

var
  year : years;
  month : months;
  day : days;
  leap,notLeap,bm,sm, flag : boolean;
  dd,mm,yy : integer;

begin
writeln('Введите год');
leap := false;
notLeap := false;
bm := false;
sm := false;
flag := false;
  repeat
    readln(year);
    if (year <= 0) or (year > 2013) then    //Проверка года
      writeln ('Некорректный ввод')
    else
    break
  until (false);

writeln('Введите месяц');
  
  repeat
    readln(month);
    if (month <= 0) or (month > 12) then    //Проверка Месяца
      writeln ('Некорректный ввод')
    else
    break
  until (false);

writeln('Введите день');
  
  repeat
    repeat                                  //Проверка корректности даты
     readln(day);
       if (day > 31) or (day <= 0) then
         writeln ('Некорректный ввод')
       else break;   
    until false;
    if (month in FMth) and (day <= 31) then bm := true  //Проверка с 31 днем
    else
    if not (month in FMth) and (day > 30) then          //Проверка с 30 днями
      writeln ('Некорректная дата')
    else sm := true;
    if (year mod 4 = 0) and (month = 2) and (day <= 29) then    //февраль в високосном
      leap := true;
    if not(year mod 4 = 0) and (month = 2) and (day <= 28) then
      notLeap := true;
    if bm or sm or leap or notLeap then
      begin
        flag := true;
        writeln('Корректный ввод');
      end;
  until (flag) ;
// 01.01.2013 - вторник, вывести субботы

dd := 29; mm := 12; yy := 2012;  //первая суббота

  repeat
    dd := dd -7;
    if dd <=0 then
      begin
        dec(mm);
        if mm in FMth then dd :=  31
        else if not(mm in SMth) then dd := 30
          else if yy mod 4 =0 then dd := 29
          else dd := 28
      end;
    if mm <=0 then
      begin
        dec(yy);
        mm := 12;
      end;
    if yy>=year then
      writeln(dd,'.',mm,'.',yy);
  until ((yy<year));

readln;
end.
